import subprocess
from datetime import datetime
import time

p2 = subprocess.Popen(["ps", "-aux"], stdout=subprocess.PIPE)
out = p2.communicate()

f = open("temp.txt","w")
process_list = [tuple()]
for i in out:
     if i is not None:
          rows = i.split("\n")
     udt = str(datetime.now())
     for j in rows:
          row_prime = filter(None,j.split(" "))
          print row_prime
          if len(row_prime)>2:
               f.write(row_prime[1]+" "+row_prime[len(row_prime)-1]+"\n")
               process_list.append((row_prime[1],row_prime[len(row_prime)-1],udt))


print process_list

for duration in range(0,60):
    p2 = subprocess.Popen(["ps", "-aux"], stdout=subprocess.PIPE)
    out = p2.communicate()
   
    for i in out:
        if i is not None:
             rows = i.split("\n")
        udt = str(datetime.now())
        for j in rows:
             row_prime = filter(None,j.split(" "))
             print row_prime
             if len(row_prime)>2:
                  f.write(row_prime[1]+" "+row_prime[len(row_prime)-1]+" "+udt+"\n")
                  process_list.append((row_prime[1],row_prime[len(row_prime)-1],udt))
    time.sleep(60)
    
    print duration
