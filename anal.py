import os,cPickle as pickle,sys
from scrape import Resource
from collections import Counter
import time

import numpy as np

File_Count = {}
Reg_Count = {}
Mux_Count = {}
Res_Count = [File_Count, Reg_Count, Mux_Count]

malware_files = []

for root, dirs, files in os.walk("Data/"):
	for file in files:
		file = os.path.join(root, file)
		resources = pickle.load(open(file,"rb"))
		for i in range(0,3):
			if i == 0:
				malware_files.append(resources.resources[i])
			for j in resources.resources[i]:
				try:
					Res_Count[i][j] = Res_Count[i][j] + 1
				except:
					Res_Count[i][j] = 1

#r = len(files)
r = 1000
x = 0
y = 0
dis_mat = np.zeros((r, r))
for x in range(0, r):
	for y in range(0, r):
		dis_mat[x,y] = len(list(set(malware_files[x])^(set(malware_files[y]))))

pickle.dump( dis_mat, open( "matrixbin", "wb" ) )